<% if @edit_not_allowed %>
  <%= render V2::AlertComponent.new(kind: :banner, type: :notice, title: "Updates will be applied on a new release", full_screen: false) do %>
    The submissions settings can be edited while there are active releases. But they will only be applied on the next release.
  <% end %>
<% end %>

<% content_for :error_resource do %>
  <%= render V2::ErrorComponent.new(primary_config) %>
<% end %>

<% if app.cross_platform? %>
  <%= render V2::SimpleTabComponent.new(groups: @tab_groups, selected_tab: @selected_tab) do |component| %>
    <% component.with_tab do %>
      <%= render "form",
                 app:,
                 train:,
                 platform_label: primary_label,
                 platform_name: primary_platform.platform,
                 platform: primary_platform,
                 platform_config: primary_config,
                 ci_actions:,
                 submission_types: %>
    <% end %>

    <% component.with_tab do %>
      <%= render "form",
                 app:,
                 train:,
                 platform_label: other_label,
                 platform_name: other_platform.platform,
                 platform: other_platform,
                 platform_config: other_config,
                 ci_actions:,
                 submission_types: %>
    <% end %>
  <% end %>
<% else %>
  <%= render "form",
             app:,
             train:,
             platform_label: primary_label,
             platform_name: primary_platform.platform,
             platform: primary_platform,
             platform_config: primary_config,
             ci_actions:,
             submission_types: %>
<% end %>
