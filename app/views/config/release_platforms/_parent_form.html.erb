<% if @edit_not_allowed %>
  <%= render V2::AlertComponent.new(kind: :banner, type: :notice, title: "Updates will be applied on a new release", full_screen: false) do %>
    The submissions settings can be edited while there are active releases. But they will only be applied on the next release.
  <% end %>
<% end %>

<% if app.cross_platform? %>
  <%= render V2::SimpleTabComponent.new(groups: ["Configure #{selected_label}", "Configure #{other_label}"]) do |component| %>
    <% content_for :error_resource do %>
      <%= render V2::ErrorComponent.new(selected_config) %>
    <% end %>

    <% component.with_tab do %>
      <%= render "form",
                 app:,
                 train:,
                 platform_label: selected_label,
                 platform_name: selected_platform.platform,
                 platform: selected_platform,
                 platform_config: selected_config,
                 ci_actions:,
                 submission_types: %>
    <% end %>

    <% component.with_tab do %>
      <%= render "form",
                 app:,
                 train:,
                 platform_label: other_label,
                 platform_name: selected_platform.platform,
                 platform: other_platform,
                 platform_config: other_config,
                 ci_actions:,
                 submission_types: %>
    <% end %>
  <% end %>
<% else %>
  <% platform = selected_config.release_platform %>
  <% platform_name = platform.platform %>
  <%= render "form",
             app:,
             train:,
             platform_name:,
             platform:,
             platform_config: selected_config,
             ci_actions:,
             submission_types: %>
<% end %>
