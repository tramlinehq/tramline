<%= render V2::EnhancedTurboFrameComponent.new("#{@integration_category}_config") do %>
  <%= render V2::FormComponent.new(model: [@app, @config], url: app_app_config_path(@app), method: :patch) do |f| %>
    <% f.with_section(heading: "Select") do |section| %>
      <% section.with_description do %>
        Primary working code repository.
      <% end %>

      <div>
        <%= section.F.labeled_select :code_repository,
                                     "Code Repository",
                                     options_for_select(
                                       display_channels(@code_repositories) { |chan| chan[:full_name] },
                                       @config.code_repository.to_json
                                     ) %>
      </div>
    <% end %>

    <% f.with_action do %>
      <%= f.F.authz_submit "Update", "plus.svg", size: :xs %>
    <% end %>
  <% end %>
<% end %>
