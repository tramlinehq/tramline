<%= render FormComponent.new(model: [app, train, train.releases.new],
                             url: app_train_releases_path(app, train),
                             free_form: true) do |form| %>

  <div data-controller="reveal">
    <%= render OptionCardsComponent.new(form: form.F, options: release_options) %>

    <div class="mt-2" hidden data-reveal>
      <%= form.F.labeled_text_field :custom_release_version,
            "Version Name",
            autocomplete: "off",
            placeholder: "Eg. 1.1.2" %>
    </div>
  </div>

  <% if train.almost_trunk? %>
    <div class="mt-2">
      <%# TODO: Validate full commit hash is provided %>
      <%= form.F.labeled_text_field :commit_hash,
            "Commit SHA",
            autocomplete: "off",
            placeholder: nil %>
      <p class="mt-1 text-secondary text-xs">
        The SHA to cut the release branch from <%= train.working_branch %>.
      </p>
    </div>
  <% end %>

  <% form.with_action do %>
    <%= form.F.authz_submit "Start", "zap.svg" %>
  <% end %>
<% end %>
