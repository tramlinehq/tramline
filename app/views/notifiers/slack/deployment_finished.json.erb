{
  "blocks": [
    {
      "type": "context",
      "elements": [
        {
          "type": "image",
          "image_url": "<%= @platform_public_img %>",
          "alt_text": "app"
        },
        {
          "type": "mrkdwn",
          "text": "*<%= @app_name %> (<%= @app_platform %>)* <%= @train_current_version %>"
        }
      ]
    },
    {
      "type": "section",
      "text": {
        "type": "mrkdwn",
        "text": "New *<%= @deployment_channel_type %>* build *<%= @build_number %>* is now available to *<%= @deployment_channel_name %>* :sparkles:"
      }
    },
    {
      "type": "section",
      "text": {
        "type": "mrkdwn",
        "text": "*Build notes*\n```<%= Regexp.escape @build_notes %>```"
      }
    },
    {
      "type": "divider"
    },
    <% if @deployment_channel_asset_link && @project_link %>
    {
      "type": "context",
      "elements": [
        {
          "type": "image",
          "image_url": "<%= @deployment_channel_asset_link %>",
          "alt_text": "console"
        },
        {
          "type": "mrkdwn",
          "text": "<<%= @project_link %>|View on console>"
        }
      ]
    },
    <% end %>
    <% if @artifact_download_link %>
    {
      "type": "context",
      "elements": [
        {
          "type": "image",
          "image_url": "https://storage.googleapis.com/tramline-public-assets/download_link_ico.png",
          "alt_text": "build"
        },
        {
          "type": "mrkdwn",
          "text": "<<%= @artifact_download_link %>|Direct download>"
        }
      ]
    },
    <% end %>
    {
      "type": "context",
      "elements": [
        {
          "type": "image",
          "image_url": "https://storage.googleapis.com/tramline-public-assets/tramline-small.png",
          "alt_text": "tramline"
        },
        {
          "type": "mrkdwn",
          "text": "<<%= @release_url %>|Live release>"
        }
      ]
    },
    {
      "type": "context",
      "elements": [
        {
          "type": "image",
          "image_url": "<%= @vcs_public_icon_img %>",
          "alt_text": "vcs"
        },
        {
          "type": "mrkdwn",
          "text": "<<%= @release_branch_url %>|Release branch – <%= @release_branch %>>"
        }
      ]
    },
    {
      "type": "context",
      "elements": [
        {
          "type": "plain_text",
          "text": "Release train: <%= @train_name %>",
          "emoji": true
        },
        {
          "type": "plain_text",
          "text": " • ",
          "emoji": false
        },
        {
          "type": "plain_text",
          "text": "<%= @step_type %> step: <%= @step_name %>",
          "emoji": true
        },
        {
          "type": "plain_text",
          "text": " • ",
          "emoji": false
        },
        {
          "type": "plain_text",
          "text": "Deployment: <%= @deployment_channel_type %> + <%= @deployment_channel_name %>",
          "emoji": true
        }
      ]
    },
    {
      "type": "divider"
    }
  ]
}
