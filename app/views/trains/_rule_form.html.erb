<%= form_with(model: [app, train, release_platform, rule],
              url: app_train_platform_release_health_rules_path(app, train, release_platform),
              builder: EnhancedFormHelper::AuthzForm) do |form| %>
  <div class="grid gap-4 mb-4">
    <div>
      <%= form.labeled_text_field :name, "Name" %>
    </div>

    <%= render partial: "rule_expressions_form", locals: { form:,
                                                           id: "trigger_rules",
                                                           description: "Release is unhealthy when any of these conditions are met...",
                                                           button_text: "Add health condition",
                                                           field: :trigger_rule_expressions,
                                                           klass: TriggerRuleExpression,
                                                           is_seeded: true } %>

    <%= render partial: "rule_expressions_form", locals: { form:,
                                                           id: "filter_rules",
                                                           description: "If all of these filters match...",
                                                           button_text: "Add filter condition",
                                                           field: :filter_rule_expressions,
                                                           klass: FilterRuleExpression,
                                                           is_seeded: false } %>

  </div>
  <%= form.authz_submit "Save", "v2/archive.svg" %>
<% end %>
