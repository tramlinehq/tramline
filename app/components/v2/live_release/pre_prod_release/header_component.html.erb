<div class="grid grid-cols-2 gap-1">
  <div>
    <% if events.present? %>
      <%= render TimelineComponent.new(events:, truncate: true, view_all_link: timeline_release_path(pre_prod_release.release)) %>
    <% end %>
  </div>

  <div class="flex flex-col justify-start gap-1">
    <div class="flex justify-end item-gap-default">
      <div class="flex gap-1 items-center text-secondary text-sm">
        <% icon = V2::IconComponent.new("v2/info_full.svg", size: :base) %>
        <% icon.with_tooltip("", placement: "bottom", type: :detailed) do |tooltip| %>
          <% tooltip.with_detailed_text do %>
            <p>• The largest build artifact from the workflow is picked up.</p>
            <p>• Submissions will happen automatically when the build is available.</p>
          <% end %>
        <% end %>
        <%= render icon %>

        Workflow
      </div>
      <div class="last:border-0 border-l border-solid border-main-300"></div>
      <div>
        <%= render V2::BadgeComponent.new(text: workflow_config.name, kind: :badge) do |badge| %>
          <% badge.with_icon(ci_cd_provider_logo) %>
        <% end %>
      </div>
    </div>

    <div class="flex justify-end">
      <%= render V2::ModalComponent.new(title: "Build insights",
                                        size: :lg,
                                        type: :drawer,
                                        authz: false) do |modal| %>
        <% button = modal.with_button(label: "Build insights",
                                      scheme: :supporting,
                                      size: :xxs,
                                      type: :action) %>
        <% button.with_icon("lightbulb.svg", size: :md) %>
        <% button.with_tooltip("See various metadata trends", placement: "top") %>

        <% modal.with_body do %>
          <%= render partial: "pre_prod_releases/build_insights", locals: { builds: } %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
